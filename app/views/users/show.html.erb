<header class="bg-primary text-center py-5">
  <div class="container">
    <div id="sub-nav-row" class="row justify-content-around">
      <button id="liked-drinks" type="button" class="col-4 btn btn-outline-light btn-lg" onclick="getLikedDrinks(); return false;">Drinks You Like</button>
      <button id="recommended_drinks" type="button" class="col-4 btn btn-outline-light btn-lg" onclick="getRecommendedDrinks(); return false;">Drinks We've Recommended</button>
    </div>
  </div>
</header>

<section class="bg-light pt-4">
  <div class="container">
    <div id="drinks-row" class="row">
      <%= render partial: "drinks/drink", collection: @drinks if @drinks %>
    </div>
  </div>
</section>

<!-- <div class="col-xl-3 col-md-6 mb-4" style="display:flex;justify-content:center;align-items:flex-end;">
  <div class="card border-0 shadow drink-list">
    <a href=" ... drink_path(drink)... ">
      <img src=" ... image ..." class="card-img-top" alt=" ... drink name ...">
      <div class="card-body text-center">
        <h5 class="card-title mb-0">... drink.name ...</h5>
        <div class="card-text text-black-50">
          <strong>Ingredients:</strong> ...ingredients...
        </div>
      </div>
    </a>
  </div>
</div> -->

<script type="text/javascript">
  function getLikedDrinks() {
    $.get("<%= liked_drinks_user_path(current_user) %>")
      .then(function(resp) {
        document.querySelector('#drinks-row').innerHTML = ""
        resp.forEach(function(drink) {
          let drinksRow = document.querySelector('#drinks-row')
          let drinkCol = `<div class="col-xl-3 col-md-6 mb-4" style="display:flex;justify-content:center;align-items:flex-end;">
            <div class="card border-0 shadow drink-list">
              <a href="/drinks/${drink['id']}">
                <img src="${drink['image']}" class="card-img-top" alt="${drink['name']}">
                <div class="card-body text-center">
                  <h5 class="card-title mb-0">${drink['name']}</h5>
                  <div class="card-text text-black-50">
                    <strong>Ingredients:</strong> ${drink.ingredients.map((x) => x.name).join(", ")}
                  </div>
                </div>
              </a>
            </div>
          </div>`
          drinksRow.innerHTML += drinkCol
        })
      })
  }

  function getRecommendedDrinks() {
    $.get("<%= recommended_drinks_user_path(current_user) %>")
      .then(function(resp) {
        document.querySelector('#drinks-row').innerHTML = ""
        resp.forEach(function(drink) {
          let drinksRow = document.querySelector('#drinks-row')
          let drinkCol = `<div class="col-xl-3 col-md-6 mb-4" style="display:flex;justify-content:center;align-items:flex-end;">
            <div class="card border-0 shadow drink-list">
              <a href="/drinks/${drink['id']}">
                <img src="${drink['image']}" class="card-img-top" alt="${drink['name']}">
                <div class="card-body text-center">
                  <h5 class="card-title mb-0">${drink['name']}</h5>
                  <div class="card-text text-black-50">
                    <strong>Ingredients:</strong> ${drink.ingredients.map((x) => x.name).join(", ")}
                  </div>
                </div>
              </a>
            </div>
          </div>`
          drinksRow.innerHTML += drinkCol
        })
      })
  }

  $(document).ready(function() {
    $('#sub-nav-row button').on('click', function() {
      $('#sub-nav-row button').not(this).removeClass('active');
      if (!$(this).hasClass('active')) {
        $(this).addClass('active');
      }
    });
  })
</script>
